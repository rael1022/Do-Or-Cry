<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <title>Personality Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!--FontAwesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!--Tailwind-->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>

    <!--Apply saved theme early-->
    <script>
        if (localStorage.getItem("theme") === "dark") {
            document.documentElement.classList.add("dark");
        }
    </script>

    <!--Google Font: Inter-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /*Global font*/
        body,*{
            font-family:'Inter', sans-serif;
        }
        .cover{
            margin: 25px 80px;
        }
        h1{
            font-size: 40px;
            font-weight: 900;
            margin-bottom: 10px;
            color: #4F46E5;
            text-align: center;
            text-shadow: 1px 2px 4px rgba(0,0,0,0.15);
            letter-spacing: 5px;
        }
        /* ----- CONTENT ----- */
        .container{
            max-width: 1200px;
            margin: 40px auto;
            padding: 30px 40px;
            background: #ffffff;
            border-radius: 14px;
            box-shadow: 0 3px 20px rgba(0,0,0,0.06);
        }
        .card-grid{
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(330px, 1fr));
            gap: 50px;
            margin-top: 25px;
        }
        /* ----- CARDS ----- */
        .card{
            background: #ffffff;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: 0.25s;
        }
        .card:hover{
            transform: translateY(-4px);
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        }
        .card-banner{
            height: 140px;
            width: 100%;
            background-size: cover;
            background-position: center;
        }
        .c1{
            background: linear-gradient(130deg, #b5c4d4, #d7dce0);
        }
        .c2{
            background: linear-gradient(130deg, #3f3ec2, #8366e6);
        }
        .c3{
            background: linear-gradient(130deg, #bfc2c7, #e0e0e0);
        }
        .card-content{
            padding: 18px;
            font-weight: 500;
            color: #333;
        }
        /*dark mode*/
        .dark .cover{
            background: transparent;
        }
        .dark .container{
            background: #1E1E1E;
            color: #EAEAEA;
        }
        /*Final Dark Mode Card Styles*/
        .dark .card{
            background: rgba(30,30,30,0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.08);
        }

        .dark .card:hover{
            transform: translateY(-5px);
            border-color: rgba(200,200,255,0.25);
            box-shadow: 0 0 20px rgba(120,120,255,0.18);
        }

        .dark .card-content{
            color: #F5F5F5;
        }

        .dark h1{
            color: #A5B4FC; /*nice soft purple*/
        }
    </style>
</head>

<body class="bg-[#F5F5F7] dark:bg-[#121212] text-grey-900 dark:text-gray-100">
    
    <!--Navgation Bar-->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white dark:bg-[#1A1A1A] border-b border gray-200 dark:border-gray-700">
        <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
            
            <!--Logo-->
            <div class="text-xl font-extrabold tracking-wide 
                        bg-gradient-to-r from-indigo-500 to-purple-500 
                        bg-clip-text text-transparent 
                        transition duration-300 transform 
                        hover:scale-105 hover:from-pink-500 hover:to-yellow-500">
                Do or Cry
            </div>
            
            <!--Navigation-->
            <div class="flex items-center space-x-6">
                <a href="home.html" 
                    class="font-medium transition duration-300 
                            bg-gradient-to-r from-gray-800 to-gray-800 bg-clip-text text-transparent 
                            dark:from-grey-200 dark:to-grey-200 
                            hover:from-indigo-500 hover:to-purple-500">
                    Home
                </a>
                <a href="dashboard.html" 
                    class="font-medium transition duration-300 
                            bg-gradient-to-r from-gray-800 to-gray-800 bg-clip-text text-transparent 
                            dark:from-grey-200 dark:to-grey-200 
                            hover:from-indigo-500 hover:to-purple-500">
                    Dashboard
                </a>
                <a href="tools.html" 
                    class="font-medium transition duration-300 
                        bg-gradient-to-r from-gray-800 to-gray-800 bg-clip-text text-transparent 
                        dark:from-grey-200 dark:to-grey-200 
                        hover:from-indigo-500 hover:to-purple-500">
                    Tools
                </a>

                <!--Theme Button-->
                <button onclick="toggleTheme()" 
                    class="p-2 rounded-full bg-gradient-to-r from-purple-600 to-blue-500
                            text-white dark:text-black
                            transition duration-500 transform hover:scale-125 hover:rotate-180 hover:shadow-[0_0_12px_rgba(139,92,246,0.6)]">
                    <span class="dark:hidden">ðŸŒ™</span>
                    <span class="hidden dark:inline">â˜€</span>
                </button>
            </div>
        </div>
    </nav>

    <!--Prevent content hidden behind the navbar-->
    <div class="h-16"></div>
    <div class="h-16"></div>

    <!--Main Area-->
    <div class="cover">
        <div class="container">
            <h1 style="font-size: 45px;">Personality Test</h1>
            <p class="lead">Rate each statement from <strong>1 (Strongly Disagree)</strong> to <strong>5 (Strongly Agree)</strong>. After submitting you'll see your primary and secondary procrastination types and brief advice.</p>

            <form id="quizForm" class="card" onsubmit="return handleSubmit(event)">
                
                <!-- Questions 1 - 20 -->
                <div id="questions"></div>
                
                 <div class="actions">
                    <button type="submit">Get Results</button>
                    <button type="button" class="secondary" onclick="resetForm()">Reset</button>
                    <div style="margin-left:auto"><small>Save your result: press Get Result then copy the summary.</small></div>
                 </div>
            </form>
        </div>
    </div>

    <script>
        const questions = [
            "I avoid starting tasks because Iâ€™m afraid I might do them wrongly.",
            "I delay tasks because I feel they are not perfect enough to begin.",
            "I start projects with excitement but lose interest halfway.",
            "I feel overwhelmed when a task seems too big.",
            "I usually start tasks only when the deadline is extremely close.",
            "I get easily distracted by my phone, social media, or entertainment.",
            "I worry about being judged for not performing well.",
            "I spend too much time researching or planning instead of starting.",
            "I find it hard to stick to one idea and complete it.",
            "I freeze or feel stuck when I donâ€™t know the first step.",
            "I believe I work better under pressure and tight deadlines.",
            "I jump between tasks because I cannot focus on one thing.",
            "I avoid tasks that might highlight my weaknesses.",
            "I double-check or redo small details too many times before moving on.",
            "I get bored quickly unless the task is exciting or new.",
            "I avoid tasks when they feel too confusing or unclear.",
            "I feel more energetic and productive when the deadline is near.",
            "I often waste time scrolling or watching videos instead of working.",
            "I hesitate to start tasks until Iâ€™m 'in the mood.'",
            "I find it hard to concentrate on tasks for long periods."    
        ];

        // Groups mapping (questions are 1-indexed in design)
        const groups = {
            Avoider: [1,7,13,19],
            Perfectionist: [2,8,14],
            Dreamer: [3,9,15],
            Overwhelmed: [4,10,16],
            CrisisMaker: [5,11,17],
            Distracted: [6,12,18,20]
        };

        function renderQuestions() {
            const container = document.getElementById('questions');
            questions.forEach((q,i) => {
                const idx =i+1;
                const div = document.createElement('div');
                div.className ='question';
                div.innerHTML = `
                    <div class="q-title">${idx}. ${escapeHtml(q)}</div>
                    <div class="scale" role="radiogroup" aria-labelledby="q${idx}">
                        ${[1,2,3,4,5].map(num => `
                            <input type="radio" id="q${idx}v${v}" name="q${idx}" value="${v}">
                        `).join('')}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function escapeHtml(s){return s.replace(/[&<>"'])/g, c=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"})[c])}

        function handldSubmit(e){
            e.preventDefault();
            const answers ={};
            let allAnswered = true;
            for(let i=1;i<=questions.length;i++){
                const val = document.querySelector(`input[name="q${i}"]:checked`);
                if(val){ allAnswered = false; break; }
                answers[i] = parseInt(val.value,10);
            }
            if(!allAnswered){
                alert("Please answer all questions before submitting.");
                return false;
            }

            //Sum scores per group
            const totals = {};
            for(const [type, idxs] of Object.entries(groups)){
                totals[type] = idxs.reduce((s, qIdx) => s + (answers[qIdx] || 0),0);
                return false;
            }

            //Determine primary and secondary
            const sorted = Object.entries(totals).sort((a,b)=>b[1]-a[1]);
            const primary = sorted[0];
            const secondary = sorted[1];
            displayResults(totals,primary, secondary);
            return false;
        }

        function displayResults(totals, primary, secondary){
            const area = document.getElementById('resultArea');
            area.innerHTML = '';

            const primaryDiv = document.createElement('div');
            card.className = 'card';

            const h = document.createElement('h2');
            h.textContent = 'Your Results';
            card.appendChild(h);
            
            const p = document.createElement('p');
            p.innerHTML = `<strong>Primary type:</strong> ${primary[0]} - <em>score ${primary[1]}</em><br><strong>Secondary type:</strong> ${secondary[0]} â€” <em>score ${secondary[1]}</em>`;
            card.appendChild(p);

            // Explanations
            const explanations = {
                Avoider: 'You postpone tasks because of fear â€” fear of mistakes, judgment, or failure. Strategies: start with tiny low-risk steps, practice self-compassion, set very small time-limited starts (5â€“10 minutes).',
                Perfectionist: 'You delay by overplanning and aiming for flawless results. Strategies: set "good enough" standards, limit revision rounds, use deadlines for drafts.',
                Dreamer: 'You love ideas and creativity but struggle with consistency and finishing. Strategies: break tasks into concrete next-steps, use accountability, schedule short focused sessions.',
                Overwhelmed: 'Tasks feel too big, complex, or unclear and you freeze. Strategies: chunk the task, make a simple checklist of first three steps, ask for help or clarify requirements.',
                CrisisMaker: 'You rely on pressure and urgency to perform. Strategies: simulate mini-deadlines, use timers (Pomodoro), create artificial checkpoints before the real deadline.',
                Distracted: 'You want to work but are pulled away by distractions (phone, apps). Strategies: remove distractions, use focus-blocks, enable do-not-disturb, and use single-tasking techniques.'
            };

            const exp = document.createElement('div');
            exp.className = 'result-type';
            exp.innerHTML = `<strong>${primary[0]}</strong><p style="margin:8px 0">${escapeHtml(explanations[primary[0]])}</p>`;
            card.appendChild(exp);

            const breakdown = document.createElement('div');
            breakdown.innerHTML = `<h3>Scores breakdown</h3><ul>${Object.entries(totals).map(([k,v])=>`<li><strong>${k}:</strong> ${v}</li>`).join('')}</ul>`;
            card.appendChild(breakdown);

            const note = document.createElement('p');
            note.innerHTML = '<small>Tip: Your secondary type may explain mixed behaviours. Use the strategies above combined with small experiments to change habits.</small>';
            card.appendChild(note);

            area.appendChild(card);
            area.scrollIntoView({behavior:'smooth'});
        }

        function showMessage(msg){
            const area = document.getElementById('resultArea');
            area.innerHTML = `<div class="card"><strong>${msg}</strong></div>`;
            area.scrollIntoView({behavior:'smooth'});
        }

        function resetForm(){
            document.getElementById('quizForm').reset();
            document.getElementById('resultArea').innerHTML = '';
        }

        // Initialize
        renderQuestions();

        const username = localStorage.getItem("username") || "User";
        if(document.getElementById("username")){
            document.getElementById("username").innerText = username;
        }

        function navigateTo(page){
            window.location.href = page;
        }

        function toggleTheme(){
            const html = document.documentElement;
            const isDark = html.classList.toggle("dark");
            localStorage.setItem("theme", isDark ? "dark" : "light");
        }
    </script>
</body>
</html>